# はじめに
https://www.canva.com/design/DAGKjn9wPZM/FrbQ4We9P-iZa5dVysWoMQ/edit

## 概要
- プレゼンテーションのタイトル：「米国の全国的な住宅価格に影響を与える要因の分析」
- このプロジェクトは授業で学んだ概念と技術を実世界のデータ分析問題に適用することを目的とした課題の一部

## 目的
- 主な目的：Kaggleから入手したMortgage.csvデータセットを使用して、米国の全国的な住宅価格に影響を与える要因を探索・分析すること
- データ内の主要なトレンド、パターン、関係性を特定することを目指す

## アプローチ

1. **記述統計**
   - データセットの分布と主要な特徴を理解するために記述統計を生成

2. **データの可視化**
   - Plotlyを使用してデータ内の関係性を探索・表現する可視化を作成
   - 影響を与える要因についてより明確な理解を提供

3. **高度な技術**
   - 機械学習技術を適用：
     - 特定された要因に基づいて住宅価格を予測するために、回帰分析のためのランダムフォレストを使用
     - 関連する場合、意思決定プロセスのための強化学習の使用も探索



# 要約統計の分析

## データの概要
- 全変数で36件の観測数があり、一定期間のデータ分析を示唆

## 主要指標の分析

### 1. 住宅価格指数（CSUSHPISA）
- 平均: 135.57
- 範囲: 63.96 ～ 285.82
- 標準偏差: 55.45
- 特徴: 大きな変動幅と高い標準偏差は住宅市場の不安定性を示す

### 2. 失業率（UNRATE）
- 平均: 5.76%
- 範囲: 3.5% ～ 9.8%
- 特徴: 比較的安定しているが、経済状況により変動

### 3. 連邦資金金利（FedFunds）
- 平均: 3.13%
- 範囲: 0.07% ～ 9.12%
- 特徴: 大きな変動幅は金融政策の変化を反映

### 4. 一人当たりGDP（Per_Capita_GDP）
- 平均: $12,783
- 範囲: $4,722 ～ $25,029
- 特徴: 大きな変動は経済成長と景気循環を示唆

### 5. 消費者物価指数（CPI）
- 平均: 191.52
- 範囲: 111.4 ～ 282.59
- 特徴: 上昇傾向はインフレーションを示す

### 6. 人口成長率（PopulationGrowthRate）
- 平均: 0.91%
- 範囲: 0.16% ～ 1.39%
- 特徴: 比較的安定しているが、わずかな変動あり

## 総合的な洞察
- 住宅価格、連邦資金金利、一人当たりGDPは大きく変動し、経済の好不況を反映
- 失業率、CPI、人口成長率は比較的安定しており、経済変動下でも雇用と人口動態は安定傾向




# 不動産価格分析詳細レポート

## 1. 相関分析の詳細解説

### 住宅価格と経済指標の関係
- CSUSHPISA（住宅価格指数）と他の指標との相関：
  - Per_Capita_GDP（一人当たりGDP）: 0.96の強い正の相関
  - CPI（消費者物価指数）: 0.93の強い正の相関
  - これは経済成長と物価上昇が住宅価格の上昇と密接に関連していることを示唆

### 失業率（UNRATE）の影響
- 他の経済指標と弱い負の相関：
  - CSUSHPISA: -0.25、Per_Capita_GDP: -0.16、CPI: -0.10
  - 失業率の上昇は住宅価格や経済成長にわずかながらマイナスの影響

### 連邦資金金利（FedFunds）の役割
- Per_Capita_GDPとの相関: -0.77
- CPIとの相関: -0.81
- 金利上昇は経済成長と物価上昇を抑制する傾向を示唆

### 経済成長と物価の関係
- Per_Capita_GDPとCPIの相関: 0.99
- ほぼ完全な正の相関は、経済成長と物価上昇が密接に連動していることを示す

## 2. 時系列分解の詳細分析

### 原時系列の特徴
- 1975年から2010年頃までの長期データを表示
- 全体的な上昇トレンドが明確
- 短期的な変動や周期性も観察可能

### トレンド成分の詳細
- 1975年から2000年頃まで緩やかな上昇
- 2000年代前半に急激な上昇
- 2007-2009年頃に明確な下落（サブプライムローン危機の影響）
- 2010年以降再び上昇トレンドに回復

### 季節成分の特徴
- 年内で明確な周期的パターン
- ピークとトラフの差は約20ポイント
- 夏季に価格が上昇し、冬季に下落する傾向が見られる

### 残差分析
- ±10ポイント程度の変動
- 完全にランダムではなく、一定のパターンが見られる
- これは、モデルで捉えきれていない外部要因の存在を示唆
  （例：政策変更、社会経済的イベントなど）

## 3. 総合分析と洞察

- 住宅価格は経済全体の健全性を反映する重要な指標
- 長期的には経済成長と物価上昇に強く連動
- 短期的には季節性や外部要因による変動が存在
- 金融政策（金利）は住宅市場に間接的に影響
- 失業率の影響は比較的小さいが、無視できない
- 将来予測には、トレンド、季節性、外部要因を考慮する必要がある




# ペアプロット可視化分析
ペアプロット可視化分析（Pairplot Visualization Analysis）は、複数の変数間の関係を視覚的に理解するための手法です。主に、データの探索的分析（Exploratory Data Analysis, EDA）の一環として使用されます。

ペアプロットの特徴
複数変数間の関係を可視化:

ペアプロットは、データセット内の各変数同士のペアごとに散布図を作成します。これにより、どの変数が他の変数とどのような関係にあるのかを一目で確認できます。
対角線上の分布図:

対角線上には、各変数のヒストグラムが表示されます。これは、各変数の分布を示し、データがどのように広がっているかを理解するのに役立ちます。
相関の視覚化:

各散布図を見ることで、変数間の相関関係（線形関係や非線形関係など）を視覚的に確認できます。たとえば、2つの変数が正の相関を持つ場合、散布図の点は右上がりの直線に沿って並びます。
ペアプロットの利点
直感的理解:
データのパターンやトレンドを直感的に理解するのに役立ちます。
異常値の発見:
異常値（アウトライヤー）がどこに存在するかを視覚的に確認できます。
モデルのインプットに役立つ:
どの変数が他の変数と強く関係しているかを把握することで、機械学習モデルの特徴量選択にも役立ちます。
具体的な例
例えば、あるデータセットに以下の4つの変数が含まれているとします：

収入（Income）
年齢（Age）
教育年数（Years of Education）
支出額（Expenditure）
ペアプロットを使用すると、これらの変数同士の関係が視覚的に表示されます。収入と年齢の関係、教育年数と支出額の関係などを散布図で確認でき、対角線上には各変数のヒストグラムが表示されます。

## CSUSHPISA (住宅価格指数)
- Per Capita GDPおよびCPIと正の線形関係
- 高いPer Capita GDPと消費者物価に関連する高い住宅価格
- 人口成長率と負の関係
- 低い人口成長率に関連する高い住宅価格
- UNRATEおよびFedFundsとの散布図は明確な線形関係を示さず、複雑な相互作用を示唆

## UNRATE (失業率)
- 他の変数との散布図に明確な線形関係なし。弱いまたは複雑な相互作用を示唆
- ヒストグラムは平均周辺に値が集中する単峰性分布を示す

## FedFunds (連邦資金金利)
- Per Capita GDPおよびCPIと負の関係
- 低い経済成長と消費者物価に関連する高い連邦資金金利
- 人口成長率と正の関係
- 高い人口成長率に関連する高い連邦資金金利
- ヒストグラムは2つの異なる期間を示す双峰性分布を示す

## Per Capita GDP
- CPIと強い正の線形関係
- 高いConsumer Price Indexに関連する高いPer Capita GDP
- 人口成長率と負の関係
- 低い人口成長率に関連する高いPer Capita GDP
- ヒストグラムは右に歪んだ分布を示し、低いGDP値が多い


# 経済指標と住宅価格の分析洞察

## 1. 経済成長とインフレーションの関係

- 1987年から2022年にかけて顕著な経済成長
  - 一人当たりGDP: 4,722,156 → 25,029,116
- 同期間でインフレーションも進行
  - CPI: 111.4 → 282.599
- 経済成長とインフレーションの同時進行を確認

## 2. 人口動態の変化

- 人口成長率の大幅な低下: 0.8938 → 0.3776
- 予想される影響:
  - 労働力の供給
  - 住宅市場
  - 社会サービス
- 政策的示唆:
  - 高齢化社会への対応
  - 労働力の持続可能性確保

## 3. 住宅価格予測モデルの比較

- 使用されたモデル:
  - 線形回帰
  - ElasticNet
  - ランダムフォレスト
  - 勾配ブースティング
  - SVR
  - XGBoost
- 最高性能のモデル:
  1. XGBoost (R-squared: 0.961)
  2. ランダムフォレスト (R-squared: 0.922)
- 最低性能のモデル: SVR（このデータセットには不適切）

## 4. 重要な特徴量

- 最重要特徴量: 一人当たりGDP
- 次に重要な特徴量: CPI
  - モデルによって影響の方向性が異なる
- 比較的影響の小さい特徴量: 人口成長率

## 5. モデルの特性

- 非線形モデル（ランダムフォレスト、XGBoost）が高い予測精度
- 示唆される点:
  - 住宅価格と経済指標間の複雑な非線形関係の存在
  - 高度な機械学習モデルの有効性

## 総括

これらの分析結果は、経済成長、インフレーション、人口動態の変化が住宅市場に複雑な影響を与えていることを示しています。高度な機械学習モデルが住宅価格の予測に効果的であることも明らかになりました。これらの洞察は、政策立案者や不動産関係者にとって重要な参考情報となるでしょう。



# 画像から得られる主な洞察

## ハイパーパラメータチューニングと回帰モデルの比較

- 3つの回帰モデル（Ridge、Lasso、ElasticNet）のパフォーマンスが比較されています。
- R-squared値による評価：
 * Ridge回帰：0.88
 * Lasso回帰：0.89
 * ElasticNet：0.79
- Lasso回帰が最も高いパフォーマンスを示し、特徴選択と正則化のバランスが取れています。
- ElasticNetは他の2つのモデルに比べて性能が劣っています。

## PCA（主成分分析）による経済指標の分析

- 経済指標データの次元を2つの主成分に削減しています。
- 散布図は2つの主成分に沿ってデータポイントの分布を示しています。
- 第1主成分（x軸）に沿って顕著なデータの広がりが見られ、経済指標の主要な変動を捉えています。
- データポイントは両主成分に沿って分布しており、複雑な経済指標の関係性を示唆しています。
- PCAは高次元の経済データを2次元に要約し、データセットの複雑さを簡略化しつつ、重要な情報構造を保持しています。

## データ分析手法の応用

- 回帰分析とPCAという2つの異なるアプローチが示されており、それぞれがデータの異なる側面を分析しています。
- 回帰分析は予測と変数間の関係性の理解に焦点を当てています。
- PCAはデータの次元削減と主要な変動パターンの特定に重点を置いています。

これらの分析手法は、複雑なデータセットから意味のある洞察を抽出し、データ駆動型の意思決定を支援する上で重要な役割を果たしています。